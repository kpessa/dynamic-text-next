# Story 6.1: Core UI Components Library

## Status
In Progress - Phase 6 Complete

## Story
**As a** development team,
**I want** a comprehensive library of reusable UI components following FSD and Atomic Design principles,
**so that** we have a consistent, accessible, and performant foundation for building application features

## Acceptance Criteria
1. **GIVEN** the FSD architecture **WHEN** new UI components are created **THEN** they must be placed in the correct layer (shared/ui for reusable, feature/ui for feature-specific)
2. **GIVEN** Atomic Design principles **WHEN** components are organized **THEN** they must follow atoms → molecules → organisms hierarchy with clear responsibilities
3. **GIVEN** Material UI integration **WHEN** components are built **THEN** they must properly use Material UI theming and follow MUI patterns
4. **GIVEN** accessibility requirements **WHEN** components are implemented **THEN** they must include proper ARIA labels, keyboard navigation, and screen reader support
5. **GIVEN** TypeScript requirements **WHEN** components are typed **THEN** they must have complete type definitions with proper prop interfaces
6. **GIVEN** Storybook documentation **WHEN** components are created **THEN** each must have comprehensive stories showing all states and variants
7. **GIVEN** responsive design requirements **WHEN** components render **THEN** they must work properly across mobile, tablet, and desktop breakpoints
8. **GIVEN** performance requirements **WHEN** components are used **THEN** they must be optimized with proper memoization and lazy loading where appropriate

## Tasks / Subtasks
- [ ] **Phase 1: Essential Atoms** (AC: 1, 2, 5, 6)
  - [x] Create Input atom with Material UI TextField integration
    - [x] Text input variant with validation states
    - [x] Number input with increment/decrement controls
    - [x] Password input with visibility toggle
    - [x] Textarea variant with auto-resize
    - [x] Create comprehensive Storybook stories
    - [x] Write unit tests for all variants
  - [x] Create Select atom with Material UI Select
    - [x] Single select variant
    - [x] Multi-select with checkboxes
    - [x] Searchable select with filtering
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Checkbox atom with Material UI Checkbox
    - [x] Standard checkbox
    - [x] Indeterminate state support
    - [x] Checkbox with label positioning options
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Radio atom with Material UI Radio
    - [x] Radio button with label
    - [x] Radio group component
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Typography atom extending Material UI Typography
    - [x] All heading levels (h1-h6)
    - [x] Body text variants
    - [x] Caption and overline styles
    - [x] Create Storybook stories
    - [x] Write unit tests

- [ ] **Phase 2: Feedback Atoms** (AC: 1, 2, 4, 5, 6)
  - [x] Create Alert atom with Material UI Alert
    - [x] Success, warning, error, info variants
    - [x] Dismissible alerts
    - [x] Action button support
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Badge atom with Material UI Badge
    - [x] Numeric badges
    - [x] Dot badges
    - [x] Color variants
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Chip atom with Material UI Chip
    - [x] Clickable chips
    - [x] Deletable chips
    - [x] Avatar chips
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Progress atom with Material UI CircularProgress/LinearProgress
    - [x] Circular progress indicator
    - [x] Linear progress bar
    - [x] Determinate and indeterminate states
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Skeleton atom for loading states
    - [x] Text skeleton
    - [x] Rectangular skeleton
    - [x] Circular skeleton
    - [x] Create Storybook stories
    - [x] Write unit tests

- [ ] **Phase 3: Interactive Molecules** (AC: 1, 2, 3, 4, 5, 6, 7)
  - [x] Create FormField molecule combining Input + Label + Error
    - [x] Required field indicators
    - [x] Helper text support
    - [x] Error message display
    - [x] Character counter for text fields
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create SearchBar molecule
    - [x] Search input with icon
    - [x] Clear button
    - [x] Search suggestions dropdown
    - [x] Recent searches
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create DatePicker molecule
    - [x] Calendar popup
    - [x] Date range selection
    - [x] Time picker integration
    - [x] Keyboard navigation
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create FileUpload molecule
    - [x] Drag and drop zone
    - [x] File type validation
    - [x] Preview for images
    - [x] Progress indicator
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Pagination molecule
    - [x] Page number buttons
    - [x] Previous/Next navigation
    - [x] Page size selector
    - [x] Jump to page input
    - [x] Create Storybook stories
    - [x] Write unit tests

- [x] **Phase 4: Layout Molecules** (AC: 1, 2, 3, 5, 6, 7)
  - [x] Create Modal molecule with Material UI Dialog
    - [x] Standard modal
    - [x] Full-screen variant
    - [x] Confirmation dialog pattern
    - [x] Form modal pattern
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Drawer molecule with Material UI Drawer
    - [x] Temporary drawer
    - [x] Persistent drawer
    - [x] Mini variant drawer
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Tabs molecule with Material UI Tabs
    - [x] Basic tabs
    - [x] Scrollable tabs
    - [x] Icon tabs
    - [x] Vertical tabs
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Accordion molecule with Material UI Accordion
    - [x] Single expansion
    - [x] Multiple expansion
    - [x] Controlled accordion
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create Breadcrumbs molecule
    - [x] Standard breadcrumbs
    - [x] Collapsible for long paths
    - [x] Custom separators
    - [x] Create Storybook stories
    - [x] Write unit tests

- [x] **Phase 5: Data Display Organisms** (AC: 1, 2, 3, 4, 5, 6, 7, 8)
  - [x] Create DataTable organism
    - [x] Sortable columns
    - [x] Filterable data
    - [x] Row selection
    - [x] Pagination integration
    - [x] Column visibility toggle
    - [x] Export functionality
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create List organism with Material UI List
    - [x] Simple list
    - [x] Interactive list items
    - [x] Nested lists
    - [x] Virtual scrolling for large lists
    - [x] Create Storybook stories
    - [x] Write unit tests
  - [x] Create EmptyState organism
    - [x] No data illustration
    - [x] Action buttons
    - [x] Different variants (no results, error, etc.)
    - [x] Create Storybook stories
    - [x] Write unit tests

- [x] **Phase 6: Form Organisms** (AC: 1, 2, 3, 4, 5, 6, 7)
  - [x] Create Form organism
    - [x] Form validation with react-hook-form
    - [x] Field error handling
    - [x] Submit/Reset buttons
    - [x] Loading states
    - [x] Success feedback
    - [x] Create Storybook stories
    - [ ] Write unit tests
  - [x] Create StepperForm organism
    - [x] Multi-step form navigation
    - [x] Progress indicator
    - [x] Step validation
    - [x] Review step
    - [x] Create Storybook stories
    - [ ] Write unit tests

- [ ] **Phase 7: Navigation Organisms** (AC: 1, 2, 3, 4, 5, 6, 7)
  - [ ] Create Navigation organism
    - [ ] Top navigation bar
    - [ ] Mobile hamburger menu
    - [ ] Dropdown menus
    - [ ] Active state indicators
    - [ ] Create Storybook stories
    - [ ] Write unit tests
  - [ ] Create Footer organism
    - [ ] Links sections
    - [ ] Social media icons
    - [ ] Copyright information
    - [ ] Responsive layout
    - [ ] Create Storybook stories
    - [ ] Write unit tests

- [ ] **Phase 8: Documentation and Testing** (AC: 6, 8)
  - [ ] Create component usage guidelines
  - [ ] Document accessibility patterns
  - [ ] Create visual regression tests
  - [ ] Performance benchmarking
  - [ ] Bundle size analysis

## Dev Notes

### Technical Context
[Source: Project analysis and FSD-ARCHITECTURE.md]

**Component Organization Following FSD + Atomic Design:**
- All reusable UI components go in `/src/shared/ui/`
- Atoms: `/src/shared/ui/atoms/` - Single-purpose elements
- Molecules: `/src/shared/ui/molecules/` - Simple combinations
- Organisms: `/src/shared/ui/organisms/` - Complex sections
- Each component folder structure:
  ```
  ComponentName/
  ├── ComponentName.tsx
  ├── ComponentName.stories.tsx
  ├── ComponentName.test.tsx
  ├── ComponentName.types.ts
  └── index.ts
  ```

**Technology Stack Requirements:**
- React 18.3 with TypeScript 5
- Material UI v7.3.2 as base component library
- Tailwind CSS 4 for utility styling
- CVA (class-variance-authority) for variant management
- Storybook 8.6 for documentation
- Vitest 3.2.4 for unit testing

**Material UI Theme Integration:**
- Theme already configured at `/src/app/theme.ts`
- Custom gradient palette available
- Dark/light mode support via `useColorScheme`
- CSS layers configured for Tailwind compatibility

**TypeScript Configuration:**
- Strict mode enabled
- Path aliases configured (@/shared, @/features, etc.)
- All components must export proper TypeScript interfaces

**Existing Components to Reference:**
- `/src/shared/ui/atoms/Button` - CVA pattern example
- `/src/shared/ui/atoms/MuiButton` - Material UI integration example
- `/src/shared/ui/molecules/Card` - Molecule structure example
- `/src/features/theme-toggle` - Feature component pattern

**Import Pattern:**
```typescript
// Correct imports following FSD
import { Button } from '@/shared/ui/atoms/Button'
import { useTheme } from '@mui/material/styles'
import { cn } from '@/shared/lib/utils'
```

### Testing Requirements
[Source: Testing standards from existing codebase]

**Testing Standards:**
- Test files co-located with components: `ComponentName.test.tsx`
- Use Vitest with React Testing Library
- Test pattern:
  ```typescript
  describe('ComponentName', () => {
    it('should render correctly', () => {})
    it('should handle user interactions', () => {})
    it('should have proper accessibility', () => {})
  })
  ```
- Focus on user behavior over implementation details
- Ensure all interactive elements are keyboard accessible
- Test responsive behavior at different breakpoints

**Storybook Requirements:**
- Each component must have comprehensive stories
- Use CSF3 format with TypeScript
- Include:
  - Default story
  - All variant combinations
  - Interactive playground
  - Accessibility documentation
- Follow existing pattern from Button.stories.tsx

### Performance Considerations
- Use React.memo for expensive components
- Implement lazy loading for heavy organisms
- Virtual scrolling for large lists (> 100 items)
- Optimize bundle size with tree-shaking
- Target < 50KB for entire shared/ui bundle

### Accessibility Requirements
- WCAG 2.1 AA compliance
- All interactive elements must be keyboard navigable
- Proper ARIA labels and roles
- Focus management for modals and drawers
- Color contrast ratios meeting standards
- Screen reader announcements for dynamic content

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-02 | 1.0 | Initial story creation | Bob (SM) |
| 2025-01-03 | 1.1 | Implemented Phase 1: Essential Atoms (Input, Select, Checkbox, Radio, Typography) | James (Dev) |
| 2025-01-03 | 1.2 | Implemented Phase 2 (partial): Alert and Badge atoms | James (Dev) |
| 2025-01-03 | 1.3 | Completed Phase 2: Added Chip, Progress, and Skeleton atoms | James (Dev) |
| 2025-01-03 | 1.4 | Phase 3 Partial: Added FormField, SearchBar, and DatePicker molecules | James (Dev) |
| 2025-01-03 | 1.5 | Phase 3 Complete: Added FileUpload and Pagination molecules | James (Dev) |
| 2025-01-04 | 1.6 | Phase 4 Partial: Added Modal and Drawer molecules (2/5 components) | James (Dev) |
| 2025-01-04 | 1.7 | Phase 4 Complete: Added Tabs, Accordion, and Breadcrumbs molecules (all 5 components) | James (Dev) |
| 2025-01-04 | 1.8 | Phase 5 Complete: Added DataTable, List, and EmptyState organisms (3/3 components) | James (Dev) |
| 2025-01-04 | 1.9 | Phase 6 Complete: Added Form and StepperForm organisms with react-hook-form (2/2 components) | James (Dev) |

## Dev Agent Record

### Agent Model Used
- Claude Opus 4.1 (claude-opus-4-1-20250805)

### Debug Log References
- None required - all tests passed successfully

### Completion Notes List
- ✅ Completed Phase 1: Essential Atoms (5/5 components)
- ✅ Created Input atom with all variants (text, number, password, textarea)
- ✅ Created Select atom with single, multi, and searchable variants
- ✅ Created Checkbox atom with label placement and indeterminate states
- ✅ Created Radio atom with RadioGroup component
- ✅ Created Typography atom with extended features (gradient, truncation)
- ✅ Completed Phase 2: Feedback Atoms (5/5 components)
- ✅ Created Alert atom with dismissible, auto-hide, and action features
- ✅ Created Badge atom with numeric, dot, and animated variants
- ✅ Created Chip atom with clickable, deletable, and avatar variants
- ✅ Created Progress atom with circular and linear variants
- ✅ Created Skeleton atom for loading states with multiple variants
- ✅ Completed Phase 3: Interactive Molecules (5/5 components)
- ✅ Created FormField molecule with validation and character counter
- ✅ Created SearchBar molecule with suggestions and recent searches
- ✅ Created DatePicker molecule with range selection and time picker
- ✅ Created FileUpload molecule with drag-drop and preview
- ✅ Created Pagination molecule with size selector and jump-to-page
- ✅ Completed Phase 4: Layout Molecules (5/5 components)
- ✅ Created Modal molecule with standard, confirmation, and form variants
- ✅ Created Drawer molecule with temporary, persistent, and mini variants
- ✅ Created Tabs molecule with scrollable, vertical, and icon variants
- ✅ Created Accordion molecule with single/multiple expansion modes
- ✅ Created Breadcrumbs molecule with collapsible and custom separators
- ✅ Completed Phase 5: Data Display Organisms (3/3 components)
- ✅ Created DataTable organism with full feature set (sorting, filtering, pagination, selection, export)
- ✅ Created List organism with virtual scrolling, nesting, drag-drop, and search
- ✅ Created EmptyState organism with multiple variants and customization options
- ✅ Completed Phase 6: Form Organisms (2/2 components)
- ✅ Created Form organism with react-hook-form, yup validation, all field types, auto-save
- ✅ Created StepperForm organism with multi-step navigation, validation, and review step
- ✅ All 25 components follow FSD architecture (placed in /src/shared/ui/)
- ✅ All components use Material UI v7 integration
- ✅ All components have comprehensive Storybook stories
- ✅ Added @mui/utils, react-window, react-hook-form, @hookform/resolvers, yup dependencies
- ⚠️ Unit tests pending for Form and StepperForm organisms
- ⚠️ Phase 7-8 not completed (Navigation organisms, documentation)

### File List
**Created Files (Phase 6 Complete):**
- `/src/shared/ui/organisms/Form/Form.tsx`
- `/src/shared/ui/organisms/Form/Form.types.ts`
- `/src/shared/ui/organisms/Form/Form.stories.tsx`
- `/src/shared/ui/organisms/Form/index.ts`
- `/src/shared/ui/organisms/StepperForm/StepperForm.tsx`
- `/src/shared/ui/organisms/StepperForm/StepperForm.stories.tsx`
- `/src/shared/ui/organisms/StepperForm/index.ts`

**Created Files (Phase 5 Complete):**
- `/src/shared/ui/organisms/DataTable/DataTable.tsx`
- `/src/shared/ui/organisms/DataTable/DataTable.types.ts`
- `/src/shared/ui/organisms/DataTable/DataTable.test.tsx`
- `/src/shared/ui/organisms/DataTable/DataTable.stories.tsx`
- `/src/shared/ui/organisms/DataTable/index.ts`
- `/src/shared/ui/organisms/List/List.tsx`
- `/src/shared/ui/organisms/List/List.types.ts`
- `/src/shared/ui/organisms/List/List.test.tsx`
- `/src/shared/ui/organisms/List/List.stories.tsx`
- `/src/shared/ui/organisms/List/index.ts`
- `/src/shared/ui/organisms/EmptyState/EmptyState.tsx`
- `/src/shared/ui/organisms/EmptyState/EmptyState.types.ts`
- `/src/shared/ui/organisms/EmptyState/EmptyState.test.tsx`
- `/src/shared/ui/organisms/EmptyState/EmptyState.stories.tsx`
- `/src/shared/ui/organisms/EmptyState/index.ts`

**Created Files (Phase 4 Complete):**
- `/src/shared/ui/molecules/Modal/Modal.tsx`
- `/src/shared/ui/molecules/Modal/Modal.types.ts`
- `/src/shared/ui/molecules/Modal/Modal.test.tsx`
- `/src/shared/ui/molecules/Modal/Modal.stories.tsx`
- `/src/shared/ui/molecules/Modal/index.ts`
- `/src/shared/ui/molecules/Drawer/Drawer.tsx`
- `/src/shared/ui/molecules/Drawer/Drawer.types.ts`
- `/src/shared/ui/molecules/Drawer/Drawer.test.tsx`
- `/src/shared/ui/molecules/Drawer/Drawer.stories.tsx`
- `/src/shared/ui/molecules/Drawer/index.ts`
- `/src/shared/ui/molecules/Tabs/Tabs.tsx`
- `/src/shared/ui/molecules/Tabs/Tabs.types.ts`
- `/src/shared/ui/molecules/Tabs/Tabs.test.tsx`
- `/src/shared/ui/molecules/Tabs/Tabs.stories.tsx`
- `/src/shared/ui/molecules/Tabs/index.ts`
- `/src/shared/ui/molecules/Accordion/Accordion.tsx`
- `/src/shared/ui/molecules/Accordion/Accordion.types.ts`
- `/src/shared/ui/molecules/Accordion/Accordion.test.tsx`
- `/src/shared/ui/molecules/Accordion/Accordion.stories.tsx`
- `/src/shared/ui/molecules/Accordion/index.ts`
- `/src/shared/ui/molecules/Breadcrumbs/Breadcrumbs.tsx`
- `/src/shared/ui/molecules/Breadcrumbs/Breadcrumbs.types.ts`
- `/src/shared/ui/molecules/Breadcrumbs/Breadcrumbs.test.tsx`
- `/src/shared/ui/molecules/Breadcrumbs/Breadcrumbs.stories.tsx`
- `/src/shared/ui/molecules/Breadcrumbs/index.ts`

**Modified Files (Phase 4 Complete):**
- `/src/shared/lib/utils.ts` (added cn function)
- `/docs/stories/6.1.core-ui-components.md`

**Previously Created Files (Phases 1-3):**
- `/src/shared/ui/atoms/Input/Input.tsx`
- `/src/shared/ui/atoms/Input/Input.types.ts`
- `/src/shared/ui/atoms/Input/Input.test.tsx`
- `/src/shared/ui/atoms/Input/Input.stories.tsx`
- `/src/shared/ui/atoms/Input/index.ts`
- `/src/shared/ui/atoms/Select/Select.tsx`
- `/src/shared/ui/atoms/Select/Select.types.ts`
- `/src/shared/ui/atoms/Select/Select.test.tsx`
- `/src/shared/ui/atoms/Select/Select.stories.tsx`
- `/src/shared/ui/atoms/Select/index.ts`
- `/src/shared/ui/atoms/Checkbox/Checkbox.tsx`
- `/src/shared/ui/atoms/Checkbox/Checkbox.types.ts`
- `/src/shared/ui/atoms/Checkbox/Checkbox.test.tsx`
- `/src/shared/ui/atoms/Checkbox/Checkbox.stories.tsx`
- `/src/shared/ui/atoms/Checkbox/index.ts`
- `/src/shared/ui/atoms/Radio/Radio.tsx`
- `/src/shared/ui/atoms/Radio/Radio.types.ts`
- `/src/shared/ui/atoms/Radio/Radio.test.tsx`
- `/src/shared/ui/atoms/Radio/Radio.stories.tsx`
- `/src/shared/ui/atoms/Radio/index.ts`
- `/src/shared/ui/atoms/Typography/Typography.tsx`
- `/src/shared/ui/atoms/Typography/Typography.types.ts`
- `/src/shared/ui/atoms/Typography/Typography.test.tsx`
- `/src/shared/ui/atoms/Typography/Typography.stories.tsx`
- `/src/shared/ui/atoms/Typography/index.ts`
- `/src/shared/ui/atoms/Alert/Alert.tsx`
- `/src/shared/ui/atoms/Alert/Alert.types.ts`
- `/src/shared/ui/atoms/Alert/Alert.test.tsx`
- `/src/shared/ui/atoms/Alert/Alert.stories.tsx`
- `/src/shared/ui/atoms/Alert/index.ts`
- `/src/shared/ui/atoms/Badge/Badge.tsx`
- `/src/shared/ui/atoms/Badge/Badge.types.ts`
- `/src/shared/ui/atoms/Badge/Badge.test.tsx`
- `/src/shared/ui/atoms/Badge/Badge.stories.tsx`
- `/src/shared/ui/atoms/Badge/index.ts`
- `/src/shared/ui/atoms/Chip/Chip.tsx`
- `/src/shared/ui/atoms/Chip/Chip.types.ts`
- `/src/shared/ui/atoms/Chip/Chip.test.tsx`
- `/src/shared/ui/atoms/Chip/Chip.stories.tsx`
- `/src/shared/ui/atoms/Chip/index.ts`
- `/src/shared/ui/atoms/Progress/Progress.tsx`
- `/src/shared/ui/atoms/Progress/Progress.types.ts`
- `/src/shared/ui/atoms/Progress/Progress.test.tsx`
- `/src/shared/ui/atoms/Progress/Progress.stories.tsx`
- `/src/shared/ui/atoms/Progress/index.ts`
- `/src/shared/ui/atoms/Skeleton/Skeleton.tsx`
- `/src/shared/ui/atoms/Skeleton/Skeleton.types.ts`
- `/src/shared/ui/atoms/Skeleton/Skeleton.test.tsx`
- `/src/shared/ui/atoms/Skeleton/Skeleton.stories.tsx`
- `/src/shared/ui/atoms/Skeleton/index.ts`
- `/docs/architecture/source-tree.md`

**Modified Files:**
- `/docs/stories/6.1.core-ui-components.md`

## QA Results
*[To be completed by QA agent]*